var xe={dev:!0,header:"#built using mc-build (https://github.com/mc-build/mc-build)",internalScoreboard:"LANG_MC_INTERNAL",generatedDirectory:"__generated__",rootNamespace:null,defaultNamespace:null},ae=class{constructor(){this.data=xe}get dev(){return this.data.dev}set dev(e){this.data.dev=e}get header(){return this.data.header}set header(e){this.data.header=e}get internalScoreboard(){return this.data.internalScoreboard}set internalScoreboard(e){this.data.internalScoreboard=e}get generatedDirectory(){return this.data.generatedDirectory}set generatedDirectory(e){this.data.generatedDirectory=e}get rootNamespace(){return this.data.rootNamespace}set rootNamespace(e){this.data.rootNamespace=e}get defaultNamespace(){return this.data.defaultNamespace}set defaultNamespace(e){this.data.defaultNamespace=e}},be=new ae,m=be;function ve(...t){return self.postMessage({channel:"LOG",msg:t.join(" ")})}function _e(...t){return self.postMessage({channel:"ERR",msg:t.join(" ")})}function $e(...t){return self.postMessage({channel:"WRN",msg:t.join(" ")})}function Ce(...t){return self.postMessage({channel:"INF",msg:t.join(" ")})}function Ee(...t){return self.postMessage({channel:"TSK",msg:t.join(" ")})}var re={log:ve,error:_e,warn:$e,info:Ce,task:Ee};var x=class extends Error{constructor(e,n="unknown"){super(e);this.line=n}},H=class extends Error{constructor(e,n="unknown"){super(e);this.line=n}};function J(t,e){let n=[],s=[];for(let a in e)s.push(a),n.push(e[a]);return s.push(`return function(){
${t}
}`),new Function(...s)(...n)}function A(t,e){return J(t,e)()}var z={end:[],start:[]},I={emit(t){self.postMessage({channel:"EVT",msg:t}),z[t]&&z[t].forEach(e=>e())},on(t,e){z[t].push(e)}};var Se=[],E=Se;var _=class{getPath(){return this._path}setPath(e){this._path=e}getContents(){return this._contents}setContents(e){this._contents=e}confirm(){E.push(this)}unregister(){E.indexOf(this)!=-1&&E.splice(E.indexOf(this),1)}out(){return{path:this.getPath(),contents:this.getContents()}}};var ie,V=new Set;function ce(t){if(t.indexOf("<%")>-1&&t.indexOf("%>")){let e=t.replace(/\${/g,'${"${"}').replace(/\\/g,"\\\\").replace(/<%/g,"${").replace(/%>/g,"}").replace(/\`/g,"\\`");try{return A("return `"+e+"`",ie)}catch(n){throw console.log(n),new x(`invalid template literal '${e}'`)}}return t}var U=class{constructor(e){this.segments={}}set(e,n){this.segments[e]=this.segments[e]||[],this.segments[e].push(n)}values(){return Object.values(this.segments).flat()}valuesFor(e){return Object.values(this.segments[e]||{}).flat(1/0)}reset(e){delete this.segments[e]}},oe=class{constructor(e){this.segments={},this.file=new _,this.file.setPath(e),this.current=!1}set(e,n){this.current||(this.file.confirm(),this.current=!0),this.segments[e]=this.segments[e]||[],this.segments[e].push(n),this.file.setContents(JSON.stringify({replace:!1,values:Object.values(this.segments).flat(1/0)}))}reset(e){this.current=!1,delete this.segments[e],this.current||(this.file.confirm(),this.current=!0),this.file.setContents(JSON.stringify({replace:!1,values:Object.values(this.segments).flat(1/0)}))}},K=new _;K.setPath("./data/minecraft/functions/"+m.generatedDirectory+"/events/tick.mcfunction");var le=new U(K),Q=new _;Q.setPath("./data/minecraft/functions/"+m.generatedDirectory+"/events/load.mcfunction");var de=new U(Q),ue=class extends _{constructor(e,n,s){super();this.parent=e,this.top=n||this,this.functions=[],this.namespace="lang_error",this._path=Math.random().toString(36).substr(2),this.target=this,this.intent=s}addCommand(e){this.functions.push(ce(e))}setPath(e){this._path=e}getReference(){return this.namespace+":"+this._path}out(){return{path:this.getPath(),contents:this.getContents()}}getContents(){return(m.header?m.header+`

`:"")+this.functions.map(e=>e.replace(/\$block/g,this.namespace+":"+this.getFunctionPath()).replace(/\$top/g,this.top.getReference()).replace(/\$parent/g,()=>{if(this.parent)return this.parent.getReference();throw new x("$parent used where there is no valid parent.")})).join(`
`)}getPath(){return"./data/"+this.namespace+"/functions/"+this._path+".mcfunction"}getFunctionPath(){return this._path}confirm(e){V.has(this._path)||(V.add(this._path),this.intent==="load"?de.set(e,this.getReference()):this.intent==="tick"&&le.set(e,this.getReference()),super.confirm())}toString(){return"function "+this.namespace+":"+this.getFunctionPath()}static setEnv(e){V=new Set,ie=e}},B={MCFunction:ue,tickFunction:le,loadFunction:de,loadFile:Q,tickFile:K,evaluate_str:ce,MultiFileTag:oe};var{MCFunction:b,loadFunction:R,tickFunction:Z,evaluate_str:O}=B,l={},G=0,X=0,me=0;function d(t){return X++,me+50<Date.now()&&(postMessage({type:"progress",total:G,current:X,percent:X/G,token:t[0]}),me=Date.now()),t.shift()}var y=0,$={},p=[];var Fe={},C=null,F=null,he={},D=new Map;function fe(t,e){let n=e||[];for(let s=0;s<t.length;s++)Array.isArray(t[s])?fe(t[s],n):n.push(t[s]);return n}function Y(t){let e=fe(Array.from(D.values()));for(let n=0;n<e.length+1;n++)if(!e.includes(n)){let s=D.get(t)||[];return s.push(n),D.set(t,s),n}}function Oe(t){D.delete(t)}var P=(t,e)=>{try{return A(`return ${t}`,{...$,args:e.args,storage:he[e.file||"mc"],type:n=>e.args[n].type})}catch(n){throw new x(n.message,e.line)}},L=class{constructor(e,n,s){this.line=e,this.token=n}[Symbol.toStringTag](){return this.token}},pe=t=>{let e=!1;return t.split(`
`).reduce((n,s,a)=>{if(s=s.trim(),s.startsWith("###")&&(e=!e),e||s[0]==="#"||!s)return n;if(s[0]==="\\"&&s[1]=="#"&&(s=s.slice(1)),s[0]==="}"&&(n.push(new L(a,"}",!0)),s=s.slice(1)),s[s.length-1]==="{"){let r=s.slice(0,s.length-1).trim();r&&n.push(new L(a,r,!0)),n.push(new L(a,"{",!0))}else s&&n.push(new L(a,s,!0));return n},[])};function w(t,e){let n=d(t);if(n&&n.token!=e)throw new x(`unexpected token '${n.token}' expected '${e}'`,n.line)}function ne({getToken:t,actions:e,def:n}){let s=(a,r,...c)=>{let i=s.getToken(r),o=s.actions.find(u=>u.match(i));return o?o.exec(a,r,...c):s.def(a,r,...c)};return s.actions=e.map((a,r)=>(a.priority=r,a)),s.def=n,s.getToken=t,s.addAction=(a,r=s.actions.length)=>{a.priority=r,s.actions=[a,...s.actions].sort((c,i)=>c.priority-i.priority)},s}l.Namespace=(t,e,n)=>{let s=O(e.substr(4));if(/[^a-z0-9_\.]/.test(s))throw new x("invalid directory name '"+s+"'",e.line);for(p.push(s.trim()),w(n,"{");n[0].token!="}";)l.Entry(t,n,!0);w(n,"}"),p.pop()};l.EntryOp=ne({getToken:t=>t[0],actions:[{match:({token:t})=>/dir .+/.test(t),exec(t,e){l.Namespace(t,d(e).token,e)}},{match:({token:t})=>/function .+/.test(t),exec(t,e){l.Function(t,e)}},{match:({token:t})=>/clock .+/.test(t),exec(t,e){let{token:n}=e[0],s=n.substr(6);d(e);let a=l.Block(t,e,"clock",{prepend:["schedule function $block "+s]});R.set(t,a.substr(9))}},{match:({token:t})=>/^LOOP/.test(t),exec(t,e){let n=d(e);l.Loop(t,n.token,e,!0,l.Entry)}},{match:({token:t})=>/^!IF\(/.test(t),exec(t,e){let n=d(e),{token:s}=n,a=s.substr(4,s.length-5);if(w(e,"{"),P(a,n)){for(;e[0].token!="}";)l.Entry(t,e,!0);w(e,"}")}else{let r=1;for(;r&&e.length;){let c=d(e).token;c==="{"&&r++,c==="}"&&r--}}}},{match:({token:t})=>/^!.+/.test(t),exec(t,e){let n=e[0],{token:s}=n,a=s.substr(1);if(d(e),w(e,"{"),P(a,n)){for(;e[0].token!="}";)l.Entry(t,e,!0);w(e,"}")}else{let r=1;for(;r&&e.length;){let c=d(e).token;c==="{"&&r++,c==="}"&&r--}}}}],def:(t,e)=>{let n=d(e);throw new x(`unexpected token '${n.token}' before ${e[0]?e[0].token.length>10?e[0].token.substr(0,10)+"...":e[0].token:"EOF"}`,n.line)}});l.Entry=(t,e,n)=>{if(n)l.EntryOp(t,e);else for(;e[0];)l.EntryOp(t,e)};l.Function=(t,e,n={})=>{let s=d(e),a=s.token.substr(9);if(a=O(a),/[^a-z0-9_\.]/.test(a))throw new x("invalid function name '"+a+"'",s.line);let r=new b(void 0,void 0,a);for(r.namespace=p[0],r.setPath(p.slice(1).concat(a).join("/")),w(e,"{");e[0].token!="}"&&e[0];)l.Generic(t,e,r,r,r);if(w(e,"}"),n.append)for(let c of n.append)r.addCommand(c);return r.confirm(t),r};l.Generic=ne({getToken:t=>t[0],actions:[{match:({token:t})=>t==="load",exec(t,e){d(e);let n=l.Block(t,e,"load",{dummy:!0},null,null);for(let s=0;s<n.functions.length;s++)C.addCommand(n.functions[s])}},{match:({token:t})=>t==="tick",exec(t,e){d(e);let n=l.Block(t,e,"tick",{dummy:!0},null,null);for(let s=0;s<n.functions.length;s++)F.addCommand(n.functions[s])}},{match:({token:t})=>t.startsWith("warn "),exec(t,e){let{token:n}=d(e);re.warn(O(n.substr(5).trim()))}},{match:({token:t})=>t.startsWith("error "),exec(t,e){let n=d(e),{token:s}=n;throw new H(s.substr(5).trim(),n.line)}},{match:({token:t})=>/^execute\s*\(/.test(t),exec(t,e,n,s,a){let{token:r}=d(e),c=r.substring(r.indexOf("(")+1,r.length-1);for(n.addCommand(`scoreboard players set #execute ${m.internalScoreboard} 0`),n.addCommand(`execute ${c} run ${l.Block(t,e,"conditional",{append:[`scoreboard players set #execute ${m.internalScoreboard} 1`]},s,a)}`);/^else execute\s*\(/.test(e[0].token);)r=d(e).token,c=r.substring(r.indexOf("(")+1,r.length-1),n.addCommand(`execute if score #execute ${m.internalScoreboard} matches 0 ${c} run ${l.Block(t,e,"conditional",{append:[`scoreboard players set #execute ${m.internalScoreboard} 1`]},s,a)}`);/^else/.test(e[0].token)&&(d(e),n.addCommand(`execute if score #execute ${m.internalScoreboard} matches 0 run ${l.Block(t,e,"conditional",{},s,a)}`))}},{match:({token:t})=>/^!IF\(/.test(t),exec(t,e,n){let s=d(e),{token:a}=s,r=a.substr(4,a.length-5);if(w(e,"{"),P(r,s)){for(;e[0].token!="}";)l.Generic(t,e,n);w(e,"}")}else{let c=1;for(;c&&e.length;){let i=d(e).token;i==="{"&&c++,i==="}"&&c--}}}},{match:({token:t})=>/^!.+/.test(t),exec(t,e,n){let s=d(e),{token:a}=s,r=a.substr(1);if(w(e,"{"),P(r,s)){for(;e[0].token!="}";)l.Generic(t,e,n);w(e,"}")}else{let c=1;for(;c&&e.length;){let i=d(e).token;i==="{"&&c++,i==="}"&&c--}}}},{match:({token:t})=>/^block|^{/.test(t),exec(t,e,n,s){e[0].token==="block"&&d(e),n.addCommand(l.Block(t,e,"block",{},s,null))}},{match:({token:t})=>t.startsWith("execute")&&t.indexOf("run")!=-1,exec(t,e,n,s,a){let r=d(e),{token:c}=r,i=c.substr(c.lastIndexOf("run")+3).trim(),o=c.substr(0,c.lastIndexOf("run")+3).trim(),u=!0;if(i)n.addCommand(c);else{u=!1;let f=r;for(let v=0;v<e.length&&e[v].line===f.line;v++)f=e[v];let g=[],S=0,M=1;if(f&&f.token==="{"){let v=d(e);for(g.push(v);e.length&&M||v.line==e[0].line;)e[0].token==="}"&&M--,e[0].token==="{"?M++:M>0&&S++,v=d(e),g.push(v)}if(S===1){n.addCommand(o+" "+g[1].token);return}e.unshift(...g),G+=g.length;let se=l.Block(t,e,"execute",{dummy:!0},u?s:n,u?a:n);se.confirm(t),n.addCommand(o+" function "+se.getReference())}}},{match:({token:t})=>/^LOOP/.test(t),exec(t,e,n){let{token:s}=d(e);l.Loop(t,s,e,n,l.Generic,null,null)}},{match:({token:t})=>/until\s*\(/.test(t),exec(t,e,n,s,a){let{token:r}=d(e),c=r.substr(6,r.length-7),i=c.substr(0,c.lastIndexOf(",")).trim(),o=c.substr(c.lastIndexOf(",")+1).trim(),u=Y(t),f=l.Block(t,e,"until",{prepend:[`scoreboard players set #until_${u} ${m.internalScoreboard} 1`]},s,null),g=new b,S=m.generatedDirectory+"/until/"+(y.until=(y.until==null?-1:y.until)+1);g.namespace=p[0],g.setPath(p.slice(1).concat(S).join("/")),g.addCommand(`scoreboard players set #until_${u} ${m.internalScoreboard} 0`),g.addCommand(`execute ${i} run ${f}`),g.addCommand(`execute if score #until_${u} ${m.internalScoreboard} matches 0 run schedule function $block ${o}`),g.confirm(t),n.addCommand(`function ${g.getReference()}`)}},{match:({token:t})=>/^async while/.test(t),exec(t,e,n,s){let{token:a}=d(e),r=a.substr(12,a.length-13),c=r.substr(0,r.lastIndexOf(",")).trim(),i=r.substr(r.lastIndexOf(",")+1).trim(),o=new b,u=Y(t),f=m.generatedDirectory+"/while/"+(y.while=(y.while==null?-1:y.while)+1);o.namespace=p[0],o.setPath(p.slice(1).concat(f).join("/"));let g=l.Block(t,e,"while",{append:[`scoreboard players set #WHILE_${u} ${m.internalScoreboard} 1`,`schedule function ${o.getReference()} ${i}`]},s,n);if(o.addCommand(`scoreboard players set #WHILE_${u} ${m.internalScoreboard} 0`),o.addCommand(`execute ${c} run ${g}`),/^finally$/.test(e[0].token)){a=d(e).token;let S=l.Block(t,e,"while",{},o,n);o.addCommand(`execute if score #WHILE_${u} ${m.internalScoreboard} matches 0 run ${S}`)}o.confirm(t),n.addCommand(`function ${o.getReference()}`)}},{match:({token:t})=>/^while/.test(t),exec(t,e,n,s){let{token:a}=d(e),c=a.substr(6,a.length-7).trim(),i=new b,o=m.generatedDirectory+"/while/"+(y.while=(y.while==null?-1:y.while)+1),u=Y(t);i.namespace=p[0],i.setPath(p.slice(1).concat(o).join("/"));let f=l.Block(t,e,"while",{append:[`scoreboard players set #WHILE_${u} ${m.internalScoreboard} 1`,`function ${i.getReference()}`]},s,n);if(i.addCommand(`scoreboard players set #WHILE_${u} ${m.internalScoreboard} 0`),i.addCommand(`execute ${c} run ${f}`),/^finally$/.test(e[0].token)){a=d(e).token;let g=l.Block(t,e,"while",{},i,n);i.addCommand(`execute if score #WHILE_${u} ${m.internalScoreboard} matches 0 run ${g}`)}i.confirm(t),n.addCommand(`function ${i.getReference()}`)}},{match:({token:t})=>/^schedule\s?((\d|\.)+(d|t|s)|<%.+)\s?(append|replace){0,1}$/.test(t),exec(t,e,n,s,a){let{token:r}=d(e),c=l.Block(t,e,"schedule",{},s,a),[,i,o]=O(r).split(/\s+/);n.addCommand(`schedule ${c} ${i} ${o}`.trim())}},{match:({token:t})=>t==="sequence",exec(t,e,n){d(e);let s=l.Block(t,e,"sequence",{dummy:!0},null,null),a=i=>{let o=+i.substr(0,i.length-1);switch(i[i.length-1]){case"s":o*=20;break;case"d":o*=24e3;break}return o},r={},c=0;for(let i of s.functions)i.startsWith("delay")?c+=a(i.substr(6).trim()):i.startsWith("setdelay")?c=a(i.substr(9).trim()):(r[c]=r[c]||[],r[c].push(i));for(let i in r)if(i==0)for(let o of r[i])n.addCommand(o);else{let o=new b,u=m.generatedDirectory+"/sequence/"+(y.sequence=(y.sequence==null?-1:y.sequence)+1);o.namespace=p[0],o.setPath(p.slice(1).concat(u).join("/"));for(let f of r[i])o.addCommand(f);n.addCommand(`schedule ${o.toString()} ${i}t replace`),o.confirm()}}},{match:({token:t})=>t==="(",exec(t,e,n){d(e);let s="",a=d(e);for(;a.token!=")";)s+=a.token+" ",a=d(e);n.addCommand(s.trim())}}],def(t,e,n,s,a){let r=d(e),{token:c}=r;n.addCommand(c)}});l.Block=(t,e,n,s={},a,r)=>{w(e,"{"),n||(n="none");let c=null;if(e[0].token.startsWith("name ")){let o=d(e).token;c=O(o.substr(5)).trim()}else c=m.generatedDirectory+"/"+n+"/"+(y[n]=(y[n]==null?-1:y[n])+1);let i=new b(a,r);if(r===null&&(r=i),i.namespace=p[0],i.setPath(p.slice(1).concat(c).join("/")),s.prepend)for(let o of s.prepend)i.addCommand(o);for(;e[0].token!="}"&&e[0];)l.Generic(t,e,i,i,n=="conditional"?r:i);if(s.append)for(let o of s.append)i.addCommand(o);return w(e,"}"),s.dummy?i:(i.confirm(t),i.toString())};l.Loop=(t,e,n,s,a=l.Generic,r,c)=>{let[i,o]=e.substring(e.indexOf("(")+1,e.length-1).split(",").map(u=>u.trim());if(e.indexOf("[")!=-1){let u=e.substring(e.indexOf("(")+1,e.length-1).split(",");o=u.pop(),i=u.join(",")}if(i=P(i,e),w(n,"{"),Array.isArray(i)){for(let u=0;u<i.length-1;u++){let f=[...n];for($[o]=i[u];f[0].token!="}"&&f.length;)a(t,f,s,r,c)}$[o]=i[i.length-1]}else{for(let u=0;u<i-1;u++){let f=[...n];for($[o]=u;f[0].token!="}"&&f.length;)a(t,f,s,r,c)}$[o]=i-1}for(;n[0].token!="}"&&n.length;)a(t,n,s,r,c);w(n,"}"),delete $[o]};var ee=new B.MultiFileTag("./data/minecraft/tags/functions/tick.json"),te=new B.MultiFileTag("./data/minecraft/tags/functions/load.json");function ge(t,e,n,s){n&&Object.assign(m,n);let a="dummy";I.emit("start"),Oe(a),hashes=new Map,Fe={},included_file_list=[],p=[e],Array.isArray(s)&&p.push(...s),m.defaultNamespace&&p.unshift(m.defaultNamespace),C=new b(null,null,"load"),C.namespace=p[0],C.setPath(p.slice(1).concat(m.generatedDirectory+"/load").join("/")),F=new b(null,null,"tick"),F.namespace=p[0],F.setPath(p.slice(1).concat(m.generatedDirectory+"/tick").join("/")),R.reset(a),Z.reset(a),te.reset(a),ee.reset(a),he={},$={config:m,file_path:a},b.setEnv($),ifId=0,y={};try{let r=pe(t);G=r.length,l.Entry(a,r),C.functions.length>0&&(C.functions=Array.from(new Set(C.functions).keys()),C.confirm(a)),F.functions.length>0&&F.confirm(a);let c=R.valuesFor(a);c.length>0&&te.set(a,c);let i=Z.valuesFor(a);i.length>0&&ee.set(a,i),I.emit("end")}catch(r){throw I.emit(r.message),r.message==="Cannot read property 'token' of undefined"?new x("expected more tokens","EOF"):r}}var h={on(t,e){I.on(t,e)},io:{loadFunction:R,tickFunction:Z,TickTag:ee,LoadTag:te,MCFunction:b},getEnv(){return $},getNamespace(t){let e=p.slice(1).join("/");return{namespace:p[0],path:e+(e.length===0?"":"/")}},transpiler:{tokenize:pe,evaluate_str:O,consumer:l,validate_next_destructive:w,list:ne,evaluators:{code:{evaluateCodeWithEnv:A,getFunctionWithEnv:J}}}};var Ne={blocks:"blocks",entities:"entity_types",fluids:"fluids",functions:"functions",items:"items"},T={},N={resolve(...t){return t.join("/")}},k={cwd(){return"."}},we=(t,e)=>{try{return h.transpiler.evaluators.code.evaluateCodeWithEnv(`return ${t}`,h.getEnv())}catch{return!0}};function W(t,e){return{match:({token:n})=>n.startsWith(t),exec(n,s){let{token:a}=s.shift(),r=a.indexOf(" ")+1,c=a.substr(r,a.length),i=new _;i.setPath(h.transpiler.evaluate_str(e(c,n))),h.transpiler.validate_next_destructive(s,"{");let o=1,u=["{"];for(;o&&s.length;){let f=s.shift().token;u.push(h.transpiler.evaluate_str(f)),f==="{"&&o++,f==="}"&&o--}i.setContents(u.join("")),i.confirm()}}}var q=h.transpiler.list({getToken:t=>t[0],actions:[{match:({token:t})=>/^LOOP/.test(t),exec(t,e,n){let{token:s}=e.shift();h.transpiler.consumer.Loop(t,s,e,n,q)}},{match:({token:t})=>/^!IF\(/.test(t),exec(t,e,n){let s=e.shift(),{token:a}=s,r=a.substr(4,a.length-5);if(e.shift(),h.transpiler.validate_next_destructive(e,"{"),we(r,s)){for(;e[0].token!="}";)q(t,e,n);h.transpiler.validate_next_destructive(e,"}")}else{let c=1;for(;c&&e.length;){let i=e.shift().token;i==="{"&&c++,i==="}"&&c--}}}},{match:({token:t})=>/^!.+/.test(t),exec(t,e,n){let{token:s}=e[0],a=s.substr(1);if(e.shift(),h.transpiler.validate_next_destructive(e,"{"),we(a)){for(;e[0].token!="}";)q(t,e,n);h.transpiler.validate_next_destructive(e,"}")}else{let r=1;for(;r&&e.length;){let c=e.shift().token;c==="{"&&r++,c==="}"&&r--}}}}],def:(t,e,n)=>{let{token:s}=e.shift();n.values.add(h.transpiler.evaluate_str(s))}}),ye=h.transpiler,je=ye.consumer.Generic,j=ye.consumer.EntryOp;je.addAction({match:({token:t})=>t.startsWith("tags"),exec(t,e,n){let s=e.shift(),{token:a}=s,[,r,c,i]=a.split(/\s+/);switch(c){case"add":T.tags[r].values.add(h.transpiler.evaluate_str(i));break;default:throw new CompilerError(`invalid tag action '${c}'`,s.line)}}});j.addAction({match:({token:t})=>/^(blocks|entities|fluids|functions|items)/.test(t),exec(t,e){let{token:n}=e.shift(),[s,a,r]=n.split(/\s+/),c=T.tags[h.transpiler.evaluate_str(a)]={type:Ne[s],replace:r==="replace",values:new Set,namespace:h.getNamespace()};for(h.transpiler.validate_next_destructive(e,"{");e[0].token!="}";)q(t,e,c);e.shift()}});j.addAction(W("loot",t=>{let e=h.getNamespace();return N.resolve("data",e.namespace,"loot_tables",e.path+t+".json")}));j.addAction(W("predicate",t=>{let e=h.getNamespace();return N.resolve(k.cwd(),"data",e.namespace,"predicates",e.path+t+".json")}));j.addAction(W("modifier",t=>{let e=h.getNamespace();return N.resolve(k.cwd(),"data",e.namespace,"item_modifiers",e.path+t+".json")}));j.addAction(W("recipe",t=>{let e=h.getNamespace();return N.resolve(k.cwd(),"data",e.namespace,"recipes",e.path+t+".json")}));j.addAction(W("advancement",t=>{let e=h.getNamespace();return N.resolve(k.cwd(),"data",e.namespace,"advancements",e.path+t+".json")}));h.on("start",t=>{T={tags:{}}});h.on("end",t=>{for(let e in T.tags){let n=T.tags[e],s=new _;s.setPath(N.resolve(k.cwd(),"data",n.namespace.namespace,"tags",n.type,n.namespace.path+e+".json")),s.setContents(JSON.stringify({replace:n.replace,values:Array.from(n.values)})),s.confirm()}});self.onmessage=t=>{ge(t.data.contents,t.data.namespace,t.data.config,t.data.dir),self.postMessage(E.map(e=>e.out()))};
